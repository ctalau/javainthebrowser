<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java in the Browser Demo</title>

    <!-- CodeMirror 5.x from CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/theme/eclipse.min.css">
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/clike/clike.min.js"></script>

    <link rel="stylesheet" href="Jib.css">

    <script src="jib/jib.nocache.js"></script>
  </head>

  <body>
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>

    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>

    <a href="https://github.com/ctalau/javainthebrowser">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub">
    </a>

    <h1>Java in the Browser Demo</h1>

    <div>
      <div style="float: left; width: 100%; border: 1px solid black; padding: 4px;">
        <textarea id="source" rows="25">
public class HelloWorld {
  public static void main(String[] args) {
    System.out.println("Hello, World!");
  }
}
        </textarea>
      </div>

      <div style="float: left; width: 100%" id="log-div">
      </div>

      <div style="float: left; width:100%; text-align:center" id="btn-div">
      </div>
    </div>

    <script>
      var editor = CodeMirror.fromTextArea(document.getElementById('source'), {
        mode: 'text/x-java',
        theme: 'eclipse',
        lineNumbers: true,
        indentUnit: 2,
        tabSize: 2,
        indentWithTabs: false
      });
    </script>

    <script type="module">
      import { loadJavac } from "./javac-api.js";

      loadJavac({ scriptUrl: "javac/javac.nocache.js" })
        .then(function (javac) {
          window.jibJavac = javac;
        })
        .catch(function (error) {
          console.warn("Failed to load javac API", error);
        });
    </script>
  </body>
</html>
